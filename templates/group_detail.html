{% extends "base.html" %}
{% block content %}

<div style="margin-bottom: 20px;">
  <a href="{{ url_for('main.manage_groups') }}" style="color: #007bff; text-decoration: none;">‚Üê Back to Groups</a>
</div>

<h2>{{ group.name }}</h2>
{% if group.description %}
  <p style="color: #666; font-size: 14px;">{{ group.description }}</p>
{% endif %}

<div style="background: #e7f3ff; padding: 12px; border-radius: 4px; margin-bottom: 20px;">
  <strong>üìä Total Contacts: {{ group.contact_count() }}</strong>
</div>

<!-- Add Contacts Form -->
<div style="background: #f5f5f5; padding: 20px; border-radius: 4px; margin-bottom: 20px;">
  <h3>Add Contacts</h3>
  <form method="POST" action="{{ url_for('main.add_contacts_to_group', id=group.id) }}">
    <label>Paste emails (one per line, or comma-separated):</label><br><br>
    <textarea name="emails" placeholder="john@example.com&#10;jane@example.com&#10;bob@example.com" style="width: 100%; height: 120px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; margin-bottom: 10px;" required></textarea><br>
    <button type="submit" style="padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">Add Contacts</button>
  </form>
</div>

<!-- Contacts in Group -->
{% if group.contacts %}
<h3>Contacts in Group ({{ group.contact_count() }})</h3>
<table style="width: 100%; border-collapse: collapse; background: white;">
  <thead>
    <tr style="background: #f8f9fa; border-bottom: 2px solid #ddd;">
      <th style="padding: 12px; text-align: left;">Email</th>
      <th style="padding: 12px; text-align: center;">Status</th>
      <th style="padding: 12px; text-align: center;">Action</th>
    </tr>
  </thead>
  <tbody>
    {% for contact in group.contacts %}
    <tr style="border-bottom: 1px solid #ddd;">
      <td style="padding: 12px;">{{ contact.email }}</td>
      <td style="padding: 12px; text-align: center;">
        {% if contact.subscribed %}
          <span style="color: #28a745;">‚úì Subscribed</span>
        {% else %}
          <span style="color: #dc3545;">‚úó Unsubscribed</span>
        {% endif %}
      </td>
      <td style="padding: 12px; text-align: center;">
        <a href="{{ url_for('main.remove_contact_from_group', id=group.id, contact_id=contact.id) }}" onclick="return confirm('Remove this contact from the group?')" style="color: #dc3545; text-decoration: none;">Remove</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<div style="text-align: center; padding: 40px; background: #f8f9fa; border-radius: 4px; margin-top: 20px;">
  <p>No contacts in this group yet. Add contacts using the form above.</p>
</div>
{% endif %}

{% endblock %}
